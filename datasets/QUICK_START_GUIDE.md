# SoraWatermarkCleaner 标注工具快速开始指南

## 🚀 快速开始

### 1. 选择标注工具版本

#### 标准版 (推荐新手)
```bash
# 启动标准版标注工具
python3 datasets/web_annotation_tool.py --port 9090
```
- **访问地址**：http://localhost:9090
- **特点**：功能完整，界面简洁，适合日常使用

#### 高精度版 (推荐专业用户)
```bash
# 启动高精度版标注工具
python3 datasets/web_annotation_tool_enhanced.py --port 9092
```
- **访问地址**：http://localhost:9092
- **特点**：高精度坐标，跨浏览器支持，适合专业标注

### 2. 使用启动脚本 (推荐)

#### 标准版启动
```bash
# 使用启动脚本
bash datasets/start_web_annotation.sh
```

#### 高精度版启动
```bash
# 使用启动脚本
bash datasets/start_enhanced_annotation.sh
```

## 📋 基本使用流程

### 步骤 1：设置目录
1. 打开 Web 界面
2. 在"图像目录"下拉菜单中选择图像文件夹
3. 在"标签目录"下拉菜单中选择标签文件夹
4. 点击"📁 加载图像"按钮

### 步骤 2：开始标注
1. 图像加载完成后，会显示第一张图像
2. 在图像上拖拽鼠标创建边界框
3. 选择标注类别（watermark/logo/text）
4. 点击"💾 保存标注"按钮保存

### 步骤 3：浏览和编辑
1. 使用"⬅️ 上一张"/"➡️ 下一张"按钮浏览图像
2. 使用下拉菜单直接跳转到指定图像
3. 点击标注框进行编辑或删除
4. 使用"🗑️ 清除当前"清除当前图像的所有标注

## 🎯 核心功能使用

### 1. 图像导航
- **上一张/下一张**：顺序浏览图像
- **下拉菜单跳转**：从下拉菜单选择图像文件名跳转
- **键盘快捷键**：
  - `A` 键：上一张图像
  - `D` 键：下一张图像

### 2. 标注创建
- **拖拽创建**：在图像上拖拽鼠标创建边界框
- **类别选择**：创建时选择标注类别
- **多标注支持**：同一图像可创建多个标注
- **键盘快捷键**：`W` 键开始创建标注框

### 3. 标注管理
- **编辑标注**：点击标注框进行编辑
- **删除标注**：右键点击标注框或按 `Delete` 键
- **标注列表**：右侧显示当前图像的所有标注
- **批量操作**：支持批量删除和修改

### 4. 自动复制功能
- **启用自动复制**：打开"🔄 自动复制标注"开关
- **选择复制模式**：
  - 复制所有标注
  - 仅复制水印标注
  - 仅复制Logo标注
  - 仅复制文本标注
- **自动应用**：切换到下一张图像时自动复制

## 🎨 界面布局说明

### 页面结构
```
┌─────────────────────────────────────────┐
│ 目录选择区域                              │
├─────────────────────────────────────────┤
│ 统计信息区域                              │
├─────────────────────────────────────────┤
│ 使用说明区域                              │
├─────────────────────────────────────────┤
│ 标注列表区域                              │
├─────────────────────────────────────────┤
│ 控制按钮区域                              │
│ [加载图像] [上一张] [下一张] [跳转] [保存] │
├─────────────────────────────────────────┤
│ 自动复制控制区域                          │
│ [🔄 自动复制标注] [开关] [模式选择]        │
├─────────────────────────────────────────┤
│ 图像显示区域                              │
│ ┌─────────────────────────────────────┐ │
│ │                                     │ │
│ │           图像显示区域                │ │
│ │                                     │ │
│ └─────────────────────────────────────┘ │
└─────────────────────────────────────────┘
```

### 控制按钮说明
- **📁 加载图像**：加载选定目录的图像文件
- **⬅️ 上一张**：切换到上一张图像
- **➡️ 下一张**：切换到下一张图像
- **🎯 跳转**：从下拉菜单选择图像跳转
- **💾 保存标注**：保存当前图像的标注
- **🗑️ 清除当前**：清除当前图像的所有标注
- **🗑️ 删除所有**：删除所有图像的标注
- **📤 导出数据**：导出标注数据

## ⌨️ 键盘快捷键

| 快捷键 | 功能 | 说明 |
|--------|------|------|
| `W` | 创建标注框 | 开始创建新的标注框 |
| `A` | 上一张图像 | 切换到上一张图像 |
| `D` | 下一张图像 | 切换到下一张图像 |
| `Delete` | 删除标注 | 删除选中的标注框 |
| `Esc` | 取消操作 | 取消当前操作 |

## 🔧 高级功能

### 1. 高精度版特有功能
- **精度验证**：点击"🎯 验证精度"按钮验证标注精度
- **坐标显示**：实时显示鼠标坐标信息
- **跨浏览器支持**：在不同浏览器中保持一致的精度

### 2. 数据导出
- **导出格式**：支持 JSON、CSV、YOLO 格式
- **导出内容**：图像路径、标注坐标、类别信息
- **批量导出**：一次性导出所有标注数据

### 3. 批量操作
- **批量删除**：删除所有图像的标注
- **批量修改**：批量修改标注类别
- **批量导出**：批量导出标注数据

## 🚨 常见问题解决

### 1. 图像无法加载
**问题**：点击"加载图像"后没有显示图像
**解决方案**：
- 检查目录路径是否正确
- 确认目录中有图像文件
- 检查文件权限

### 2. 标注无法保存
**问题**：点击"保存标注"后没有保存成功
**解决方案**：
- 检查标签目录的写入权限
- 确认标签目录路径正确
- 查看浏览器控制台错误信息

### 3. 页面显示异常
**问题**：页面布局混乱或功能异常
**解决方案**：
- 清除浏览器缓存
- 刷新页面
- 检查浏览器兼容性

### 4. 标注框位置不准确
**问题**：创建的标注框位置与预期不符
**解决方案**：
- 使用高精度版标注工具
- 检查显示器DPI设置
- 尝试不同的浏览器

## 📊 性能优化建议

### 1. 大文件处理
- **图像大小**：建议图像尺寸不超过 4K
- **文件数量**：单次加载图像数量建议不超过 1000 张
- **内存使用**：定期刷新页面释放内存

### 2. 网络优化
- **本地部署**：建议在本地部署以提高响应速度
- **网络稳定**：确保网络连接稳定
- **缓存策略**：利用浏览器缓存提高加载速度

### 3. 浏览器优化
- **推荐浏览器**：Chrome、Firefox、Safari、Edge
- **硬件加速**：启用浏览器硬件加速
- **扩展程序**：禁用可能冲突的浏览器扩展

## 📞 技术支持

### 1. 问题反馈
- **错误报告**：详细描述问题现象和复现步骤
- **环境信息**：提供操作系统、浏览器版本等信息
- **日志信息**：提供浏览器控制台的错误日志

### 2. 功能请求
- **需求描述**：详细描述功能需求和使用场景
- **优先级**：说明功能的优先级和重要性
- **兼容性**：考虑与现有功能的兼容性

### 3. 文档更新
- **使用反馈**：提供文档使用反馈和改进建议
- **内容补充**：补充缺失的文档内容
- **示例更新**：更新过时的示例和说明

---

*最后更新：2024年12月*
*快速开始指南版本：v1.0*

# SoraWatermarkCleaner 标注工具开发规则

## 🎯 开发原则

### 1. 代码质量
- **可读性**：代码结构清晰，注释完整
- **可维护性**：模块化设计，职责分离
- **可扩展性**：预留扩展接口，支持功能增强
- **稳定性**：错误处理完善，边界条件考虑周全

### 2. 用户体验
- **直观性**：界面布局合理，操作流程清晰
- **一致性**：保持界面风格和交互方式统一
- **响应性**：操作反馈及时，状态变化明确
- **容错性**：错误提示友好，恢复机制完善

## 📋 开发规范

### 1. 文件组织
```
datasets/
├── web_annotation_tool.py              # 标准版标注工具
├── web_annotation_tool_enhanced.py     # 高精度版标注工具
├── start_*.sh                          # 启动脚本
├── test_*.py                           # 测试脚本
├── *_INSTRUCTIONS.md                   # 功能说明文档
├── *_REPORT.md                         # 测试报告文档
└── run_labelimg_*.sh                   # Docker 相关脚本
```

### 2. 命名规范
- **文件命名**：使用下划线分隔，描述性命名
- **函数命名**：使用驼峰命名法，动词开头
- **变量命名**：使用驼峰命名法，名词为主
- **常量命名**：使用大写字母和下划线

### 3. 代码结构
```python
# 1. 导入模块
import ...

# 2. 全局变量
GLOBAL_CONSTANTS = ...

# 3. 工具函数
def utility_function():
    pass

# 4. 主要功能类/函数
class MainClass:
    pass

# 5. 主程序入口
if __name__ == '__main__':
    pass
```

## 🎨 界面设计规范

### 1. 布局原则
- **层次清晰**：信息架构合理，视觉层次分明
- **对齐一致**：元素对齐整齐，间距统一
- **响应式**：适配不同屏幕尺寸
- **可访问性**：支持键盘导航，颜色对比度适当

### 2. 颜色规范
```css
/* 主色调 */
--primary-color: #007bff;
--secondary-color: #6c757d;
--success-color: #28a745;
--warning-color: #ffc107;
--danger-color: #dc3545;
--info-color: #17a2b8;

/* 中性色 */
--light-color: #f8f9fa;
--dark-color: #343a40;
--muted-color: #6c757d;
```

### 3. 组件规范
- **按钮**：统一的样式和交互效果
- **输入框**：一致的边框、内边距和焦点状态
- **下拉菜单**：统一的选项样式和选择状态
- **提示信息**：统一的成功、警告、错误提示样式

## 🔧 功能开发规范

### 1. 新功能开发流程
1. **需求分析**：明确功能目标和用户场景
2. **设计文档**：编写功能设计文档
3. **代码实现**：按照规范实现功能
4. **测试验证**：编写测试脚本验证功能
5. **文档更新**：更新相关文档和说明

### 2. 功能集成规范
- **向后兼容**：新功能不影响现有功能
- **配置灵活**：支持功能开关和参数配置
- **错误处理**：完善的错误处理和用户提示
- **性能考虑**：避免影响现有功能的性能

### 3. 测试规范
- **单元测试**：核心功能必须有测试覆盖
- **集成测试**：功能间的交互测试
- **用户测试**：实际使用场景的测试
- **回归测试**：确保修改不影响现有功能

## 📝 文档规范

### 1. 文档类型
- **功能说明**：`*_INSTRUCTIONS.md`
- **测试报告**：`*_REPORT.md`
- **使用指南**：`*_GUIDE.md`
- **故障排除**：`*_TROUBLESHOOTING.md`

### 2. 文档结构
```markdown
# 标题

## 🎯 功能描述
简要描述功能的目的和作用

## 🔧 实现方案
详细说明实现方法和技术细节

## 🎨 用户体验
描述用户界面的改进和交互体验

## 🧪 测试验证
列出测试步骤和验证方法

## 📋 实现细节
提供代码示例和配置说明

## 🎯 使用场景
说明适用场景和用户受益

## 🚨 注意事项
列出重要的注意事项和限制

## 📁 相关文件
列出相关的文件和资源

## 🎉 总结
总结功能的价值和改进效果
```

### 3. 文档维护
- **及时更新**：功能变更时同步更新文档
- **版本控制**：记录文档版本和更新历史
- **交叉引用**：相关文档间建立链接关系
- **用户反馈**：根据用户反馈改进文档

## 🚀 部署规范

### 1. 版本管理
- **语义化版本**：使用语义化版本号
- **变更日志**：记录每个版本的变更内容
- **向后兼容**：保持 API 的向后兼容性
- **迁移指南**：提供版本升级的迁移指南

### 2. 配置管理
- **环境配置**：区分开发、测试、生产环境
- **参数配置**：支持通过配置文件调整参数
- **默认值**：提供合理的默认配置
- **验证机制**：配置参数的验证和错误提示

### 3. 监控和日志
- **操作日志**：记录关键操作和状态变化
- **错误日志**：记录错误信息和堆栈跟踪
- **性能监控**：监控关键性能指标
- **用户行为**：记录用户操作统计

## 🔒 安全规范

### 1. 输入验证
- **参数验证**：验证所有输入参数
- **文件验证**：验证上传文件的类型和大小
- **路径验证**：防止路径遍历攻击
- **SQL 注入**：使用参数化查询

### 2. 权限控制
- **文件权限**：控制文件系统的访问权限
- **目录权限**：限制目录的读写权限
- **用户权限**：区分不同用户的权限级别
- **操作权限**：控制敏感操作的权限

### 3. 数据保护
- **数据备份**：定期备份重要数据
- **数据加密**：敏感数据的加密存储
- **访问控制**：限制数据的访问范围
- **审计日志**：记录数据访问和修改日志

## 📊 性能规范

### 1. 响应时间
- **页面加载**：页面加载时间 < 3秒
- **操作响应**：用户操作响应时间 < 1秒
- **文件处理**：大文件处理提供进度提示
- **批量操作**：批量操作提供进度条

### 2. 资源使用
- **内存使用**：控制内存使用，避免内存泄漏
- **CPU 使用**：优化算法，减少 CPU 占用
- **网络传输**：压缩传输数据，减少带宽使用
- **存储空间**：合理使用存储空间

### 3. 并发处理
- **多用户支持**：支持多用户同时使用
- **资源竞争**：处理资源竞争和锁定
- **负载均衡**：支持负载均衡和扩展
- **故障恢复**：快速故障检测和恢复

## 🎯 质量保证

### 1. 代码审查
- **同行审查**：代码提交前进行同行审查
- **自动化检查**：使用工具进行代码质量检查
- **测试覆盖**：确保测试覆盖率达标
- **文档完整性**：确保文档完整和准确

### 2. 持续集成
- **自动化构建**：自动化的构建和部署流程
- **自动化测试**：自动化的测试执行
- **质量门禁**：设置质量门禁标准
- **快速反馈**：快速反馈构建和测试结果

### 3. 用户反馈
- **反馈收集**：建立用户反馈收集机制
- **问题跟踪**：跟踪和解决用户问题
- **功能改进**：根据反馈改进功能
- **用户培训**：提供用户培训和支持

---

*最后更新：2024年12月*
*规则版本：v1.0*

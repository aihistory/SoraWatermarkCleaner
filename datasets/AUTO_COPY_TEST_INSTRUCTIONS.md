
# 自动复制标注功能测试说明

## 🎯 功能描述

自动复制标注功能允许用户将上一张图像的标注信息自动复制到下一张图像中，特别适用于批量标注相似内容。

## 🛠️ 功能特性

### 1. 自动复制开关
- 位置：控制面板中的"🔄 自动复制标注"开关
- 功能：启用/禁用自动复制功能
- 状态：绿色表示启用，灰色表示禁用

### 2. 复制模式选择
- **复制所有标注**：复制上一张图像的所有标注
- **仅复制水印标注**：只复制类别为"watermark"的标注
- **仅复制Logo标注**：只复制类别为"logo"的标注
- **仅复制文本标注**：只复制类别为"text"的标注

### 3. 自动触发
- 当用户点击"➡️ 下一张"按钮时自动触发
- 只有在启用自动复制开关时才会执行
- 复制过程有详细的控制台日志

## 🧪 测试步骤

### 标准版本测试 (端口 9090)
1. 访问 http://localhost:9090
2. 设置图像和标注目录
3. 加载图像列表
4. 在第一张图像上创建多个不同类型的标注
5. 启用"自动复制标注"开关
6. 选择复制模式（建议先测试"复制所有标注"）
7. 点击"➡️ 下一张"按钮
8. 观察第二张图像是否自动出现复制的标注
9. 打开浏览器开发者工具查看控制台日志

### 高精度版本测试 (端口 9092)
1. 访问 http://localhost:9092
2. 重复上述步骤
3. 验证高精度版本的复制功能

## 📋 测试用例

### 用例1：复制所有标注
- 第一张图像：创建3个标注（watermark, logo, text）
- 复制模式：复制所有标注
- 预期结果：第二张图像出现3个标注

### 用例2：选择性复制
- 第一张图像：创建3个标注（watermark, logo, text）
- 复制模式：仅复制水印标注
- 预期结果：第二张图像只出现1个watermark标注

### 用例3：无标注复制
- 第一张图像：无标注
- 复制模式：任意
- 预期结果：第二张图像无复制标注

## 🔍 调试信息

### 控制台日志
启用自动复制功能后，控制台会显示以下日志：

```
🔄 自动复制功能: 已启用
💾 保存当前标注用于复制: 3 个标注
📋 复制 3 个标注到当前图像 (模式: all)
📋 复制的标注: [{...}, {...}, {...}]
已复制 3 个标注到当前图像
```

### 错误处理
- 如果复制模式没有匹配的标注，会显示"没有符合复制条件的标注"
- 如果自动复制功能未启用，不会执行复制操作
- 所有操作都有详细的日志记录

## ✅ 验证要点

1. **功能开关**：开关状态正确切换
2. **复制模式**：不同模式正确过滤标注
3. **自动触发**：点击"下一张"时正确触发
4. **标注复制**：标注正确复制到新图像
5. **界面更新**：标注框和列表正确更新
6. **日志记录**：控制台显示详细操作日志

## 🚨 注意事项

1. 复制的标注会添加到现有标注中，不会覆盖
2. 复制的是标注的位置和大小信息，不包含图像内容
3. 建议在相似内容的图像上使用此功能
4. 可以通过"清除当前"按钮清除不需要的复制标注
